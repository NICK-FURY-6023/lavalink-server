server:
  port: 2333
  address: 0.0.0.0
  http2:
    enabled: false

# ==============================================================================
# PRODUCTION LAVALINK - SINGLE NODE WITH IP ROUTING & ANTI-BLOCK
# Host on Pterodactyl Panel, use IP:2333 in your Discord bot
# ==============================================================================

plugins:
  youtube:
    enabled: true
    
    # ========================
    # YOUTUBE OAUTH2 (ANTI-BLOCK - MOST IMPORTANT!)
    # ========================
    # Step 1: Set enabled: true
    # Step 2: Start Lavalink, check console for Google link
    # Step 3: Open link, enter code, login with BURNER Google account
    # Step 4: Copy refresh token from console, paste below
    # Step 5: Restart Lavalink - Done! No more 429 errors
    oauth:
      enabled: true
      # PASTE YOUR REFRESH TOKEN HERE AFTER FIRST RUN:
      # refreshToken: "1//0gxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
      skipInitialization: false
    
    # ========================
    # POT TOKEN (OPTIONAL - Extra Anti-Block)
    # Run: https://github.com/iv-org/youtube-trusted-session-generator
    # ========================
    # pot:
    #   token: "YOUR_POT_TOKEN_HERE"
    #   visitorData: "YOUR_VISITOR_DATA_HERE"
    
    allowSearch: true
    allowDirectVideoIds: true
    allowDirectPlaylistIds: true
    
    # ========================
    # YOUTUBE CLIENTS (Premium Anti-Block Configuration)
    # Multiple clients = YouTube can't easily block you
    # ========================
    clients:
      - "TVHTML5EMBEDDED"   # Best for playback with OAuth
      - "TV"                # OAuth required
      - "IOS"               # Good fallback
      - "ANDROID_MUSIC"     # Music-optimized
      - "ANDROID_VR"        # VR client - rarely blocked
      - "WEB"               # Standard web
      - "MWEB"              # Mobile web
      - "WEBEMBEDDED"       # Embedded player
      - "MUSIC"             # YouTube Music
    # ========================
    # CLIENT OPTIONS (Optimized for Anti-Block)
    # ========================
    clientOptions:
      TVHTML5EMBEDDED:      # PRIMARY - Best anti-block
        playback: true      # OAuth required
        playlistLoading: true
        searching: true
        videoLoading: true
      TV:                   # SECONDARY - OAuth client
        playback: true      # OAuth required
        playlistLoading: false
        searching: false
        videoLoading: false
      IOS:                  # FALLBACK - Apple device
        playback: true
        playlistLoading: true
        searching: true
        videoLoading: true
      ANDROID_MUSIC:        # FALLBACK - Android Music app
        playback: true
        playlistLoading: true
        searching: true
        videoLoading: true
      ANDROID_VR:           # FALLBACK - VR (rarely blocked)
        playback: true
        playlistLoading: true
        searching: true
        videoLoading: true
      WEB:                  # SEARCH - Web client
        playback: false
        playlistLoading: true
        searching: true
        videoLoading: true
      MWEB:                 # SEARCH - Mobile web
        playback: false
        playlistLoading: true
        searching: true
        videoLoading: true
      WEBEMBEDDED:          # EMBEDDED - Player
        playback: true
        playlistLoading: false
        searching: false
        videoLoading: true
      MUSIC:                # SEARCH - YouTube Music
        playback: false
        playlistLoading: false
        searching: true
        videoLoading: false

  # ==============================================================================
  # LYRICS SOURCES - Multiple platforms for lyrics
  # ==============================================================================
  lavalyrics:
    sources:
      - spotify
      - youtube
      - deezer
      - yandexMusic
      - genius

  # ==============================================================================
  # LAVASRC - ALL MUSIC PLATFORMS ENABLED
  # ==============================================================================
  lavasrc:
    providers:
      # Search priority order - will try each until found
      - "spsearch:%QUERY%"           # Spotify search
      - "scsearch:%QUERY%"           # SoundCloud search  
      - "amsearch:%QUERY%"           # Apple Music search
      - "dzsearch:%QUERY%"           # Deezer search
      - "ytsearch:%QUERY%"           # YouTube search (fallback)
      - "dzisrc:%ISRC%"              # Deezer ISRC lookup
      - "ytsearch:\"%ISRC%\""        # YouTube ISRC fallback
      
    sources:
      spotify: true          # ✅ Spotify
      applemusic: false      # ❌ Apple Music (needs valid token)
      deezer: true           # ✅ Deezer
      yandexmusic: false     # ❌ Yandex Music (needs token)
      flowerytts: true       # ✅ Flowery TTS
      youtube: true          # ✅ YouTube (LavaSearch)
      vkmusic: false         # ❌ VK Music (needs token)
      tidal: false           # ❌ Tidal (needs token)
      qobuz: false           # ❌ Qobuz (needs subscription)
      ytdlp: false           # ❌ yt-dlp (optional)
      jiosaavn: true         # ✅ JioSaavn (Indian music)
      
    lyrics-sources:
      spotify: true          # ✅ Spotify lyrics
      deezer: true           # ✅ Deezer lyrics
      youtube: true          # ✅ YouTube lyrics
      yandexmusic: false     # ❌ Yandex lyrics (needs token)
      vkmusic: false         # ❌ VK lyrics (needs token)
      lrcLib: true           # ✅ LRC Library (https://lrclib.net)

    # ==========================================================================
    # SPOTIFY CONFIGURATION
    # ==========================================================================
    spotify:
      clientId: "d0dcdd6df8c04e9db5e3fe05fba59037"
      clientSecret: "d6721debd3ae40eb96f7c3c5f7a8ae82"
      countryCode: "US"
      playlistLoadLimit: 6
      albumLoadLimit: 6
      resolveArtistsInSearch: true
      localFiles: false

    # ==========================================================================
    # APPLE MUSIC CONFIGURATION
    # Uses public developer token for searching
    # ==========================================================================
    applemusic:
      countryCode: "US"
      mediaAPIToken: "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IldlYlBsYXlLaWQifQ.eyJpc3MiOiJBTVBXZWJQbGF5IiwiaWF0IjoxNzMzODYzMDAwLCJleHAiOjE3NDE2MzkwMDB9.placeholder"
      playlistLoadLimit: 6
      albumLoadLimit: 6

    # ==========================================================================
    # DEEZER CONFIGURATION
    # Note: For full quality, you need Deezer Premium ARL cookie
    # ==========================================================================
    deezer:
      masterDecryptionKey: "g4el58wc0zvf9na1"
      # To get ARL: Login to Deezer > Browser DevTools > Application > Cookies > 'arl'
      arl: ""  # PASTE YOUR DEEZER ARL COOKIE HERE
      formats: 
        - "MP3_320"
        - "MP3_256" 
        - "MP3_128"
        - "MP3_64"
        - "AAC_64"

    # ==========================================================================
    # YANDEX MUSIC CONFIGURATION
    # ==========================================================================
    yandexmusic:
      accessToken: ""  # Get from: https://github.com/topi314/LavaSrc#yandex-music
      playlistLoadLimit: 1
      albumLoadLimit: 1
      artistLoadLimit: 1

    # ==========================================================================
    # FLOWERY TTS CONFIGURATION (Text-to-Speech)
    # ==========================================================================
    flowerytts:
      voice: "Aria"
      translate: false
      silence: 0
      speed: 1.0
      audioFormat: "mp3"

    # ==========================================================================
    # YOUTUBE (LavaSearch) CONFIGURATION
    # ==========================================================================
    youtube:
      countryCode: "US"
      language: "en"

    # ==========================================================================
    # VK MUSIC CONFIGURATION (Russian music)
    # ==========================================================================
    vkmusic:
      userToken: ""  # Get from: https://github.com/topi314/LavaSrc#vk-music
      playlistLoadLimit: 1
      artistLoadLimit: 1
      recommendationsLoadLimit: 10

    # ==========================================================================
    # TIDAL CONFIGURATION (HiFi Music)
    # ==========================================================================
    tidal:
      countryCode: "US"
      searchLimit: 10
      # Token format: Base64 encoded clientId:clientSecret
      token: ""  # Get from: https://github.com/topi314/LavaSrc#tidal

    # ==========================================================================
    # QOBUZ CONFIGURATION (Disabled - needs subscription)
    # ==========================================================================
    # qobuz:
    #   userOauthToken: ""

    # ==========================================================================
    # YT-DLP CONFIGURATION (Extra sources support)
    # ==========================================================================
    ytdlp:
      path: "yt-dlp"
      searchLimit: 10

    # ==========================================================================
    # JIOSAAVN CONFIGURATION (Indian Music)
    # ==========================================================================
    jiosaavn:
      decryption:
        secretKey: "38346591"
        algorithm: "DES"
        transformation: "DES/ECB/PKCS5Padding"

  # ==============================================================================
  # DUNCTEBOT SOURCES - Extra platforms (TikTok, Reddit, etc.)
  # ==============================================================================
  dunctebot:
    ttsLanguage: 'en-US'
    sources:
      getyarn: true      # www.getyarn.io
      clypit: true       # www.clyp.it
      tts: true          # speak:Words to speak
      pornhub: true      # PH
      reddit: true       # Reddit videos
      ocremix: true      # www.ocremix.org (game music remixes)
      tiktok: true       # TikTok sounds
      mixcloud: true     # Mixcloud DJ mixes
      soundgasm: true    # soundgasm.net
      pixeldrain: true   # pixeldrain.com
lavalink:
  plugins:
    # ==========================================================================
    # ALL PLUGINS - Multi-Platform Support
    # ==========================================================================
    - dependency: "com.dunctebot:skybot-lavalink-plugin:1.7.0"        # Extra sources (TikTok, Reddit, etc.)
      snapshot: false
    - dependency: "com.github.topi314.lavasearch:lavasearch-plugin:1.0.0"  # Search across platforms
      snapshot: false
    - dependency: "com.github.topi314.lavalyrics:lavalyrics-plugin:1.0.0"  # Lyrics support
      snapshot: false
    - dependency: "com.github.topi314.lavasrc:lavasrc-plugin:4.3.0"        # Spotify, Apple, Deezer, JioSaavn, Tidal
      snapshot: false
    - dependency: "com.github.topi314.sponsorblock:sponsorblock-plugin:3.0.1"  # Skip sponsors in YouTube
      snapshot: false
    - dependency: "dev.lavalink.youtube:youtube-plugin:1.11.2"             # YouTube with OAuth anti-block
      snapshot: false
  pluginsDir: './plugins'
  server:
    password: "SatzzDev"
    sources:
      # ==========================================================================
      # BUILT-IN SOURCES
      # ==========================================================================
      youtube: false      # Disabled - using youtube-plugin instead (better anti-block)
      bandcamp: true      # ✅ Bandcamp (indie music)
      soundcloud: true    # ✅ SoundCloud
      twitch: true        # ✅ Twitch streams
      vimeo: true         # ✅ Vimeo videos
      nico: true          # ✅ NicoNico (Japanese)
      http: true          # ✅ Direct HTTP links
      local: false        # ❌ Local files (not needed for hosting)
    filters: # All filters are enabled by default
      volume: true
      equalizer: true
      karaoke: true
      timescale: true
      tremolo: true
      vibrato: true
      distortion: true
      rotation: true
      channelMix: true
      lowPass: true
    nonAllocatingFrameBuffer: false
    bufferDurationMs: 400
    frameBufferDurationMs: 5000
    opusEncodingQuality: 10
    resamplingQuality: HIGH
    trackStuckThresholdMs: 10000
    useSeekGhosting: true
    youtubePlaylistLoadLimit: 6
    playerUpdateInterval: 5
    youtubeSearchEnabled: true
    soundcloudSearchEnabled: true
    gc-warnings: true
    
    # ==============================================================================
    # IP ROUTING / RATE LIMIT CONFIGURATION (ANTI-BLOCK)
    # ==============================================================================
    # Option 1: Single IP (Your Pterodactyl Server IP)
    # - No extra config needed, just deploy
    #
    # Option 2: Multiple IPs (If your host provides multiple IPs)
    # - Uncomment below and add your IP blocks
    # ==============================================================================
    
    # UNCOMMENT THIS IF YOU HAVE MULTIPLE IPs FROM YOUR HOST:
    # ratelimit:
    #   ipBlocks:
    #     - "YOUR.FIRST.IP.ADDRESS/32"    # Primary IP
    #     - "YOUR.SECOND.IP.ADDRESS/32"   # Secondary IP (if available)
    #     - "YOUR.THIRD.IP.ADDRESS/32"    # Third IP (if available)
    #   excludedIps: []  # IPs to exclude from rotation
    #   strategy: "RotateOnBan"  # Options: RotateOnBan | LoadBalance | NanoSwitch | RotatingNanoSwitch
    #   searchTriggersFail: true
    #   retryLimit: -1  # -1 = default, 0 = infinite, >0 = specific retries
    
    # ==============================================================================
    # HTTP PROXY CONFIGURATION (OPTIONAL - For IP Masking)
    # ==============================================================================
    # If you have a proxy server (Squid, residential proxy, etc.)
    # All YouTube requests will go through this proxy
    # ==============================================================================
    
    # UNCOMMENT THIS IF YOU HAVE A PROXY:
    # httpConfig:
    #   proxyHost: "proxy.yourprovider.com"   # Proxy hostname/IP
    #   proxyPort: 3128                        # Proxy port
    #   proxyUser: "your_username"             # Optional: Basic auth username
    #   proxyPassword: "your_password"         # Optional: Basic auth password
    
    # ==============================================================================
    # YOUTUBE ACCOUNT LOGIN (OPTIONAL - Extra Anti-Block)
    # ==============================================================================
    # Use a BURNER Google account - may get banned!
    # OAuth2 is safer and recommended instead
    # ==============================================================================
    
    # youtubeConfig:
    #   email: "your.burner.email@gmail.com"
    #   password: "your_burner_password"

metrics:
  prometheus:
    enabled: true
    endpoint: /metrics

sentry:
  dsn: ""
  environment: ""
#  tags:
#    some_key: some_value
#    another_key: another_value

logging:
  file:
    max-history: 5
    max-size: 10MB
    path: ./logs/
  level:
    # Set this to DEBUG to enable more detailed logging. Please note that this will likely spam your console.
    root: INFO
    # Set this to DEBUG to enable more detailed logging from Lavalink.
    lavalink: INFO

    # Set this to TRACE to see all WebSocket messages.
    lavalink.server.io.SocketContext: OFF
    # Log all track exceptions (COMMON, SUSPICIOUS & FAULT). Set to DEBUG to enable detailed logging.
    com.sedmelluq.discord.lavaplayer.tools.ExceptionTools: OFF
    # Set to DEBUG to enable detailed logging of HTTP requests and responses.
    com.sedmelluq.discord.lavaplayer.tools.io.PersistentHttpStream: OFF
    # Set to DEBUG to enable detailed logging of YouTube HTTP requests and responses.
    com.sedmelluq.discord.lavaplayer.source.youtube.YoutubePersistentHttpStream: OFF
    # Set to DEBUG to enable detailed logging for the LavaSrc plugin.
    com.github.topi314.lavasrc.LavaSrcTools: OFF
    # Set to DEBUG to enable detailed logging for the YouTube audio source manager.
    dev.lavalink.youtube.YoutubeAudioSourceManager: OFF
    # Youtube Oauth2 Handle logs
    dev.lavalink.youtube.http.YoutubeOauth2Handler: INFO

  request:
    enabled: true
    includeClientInfo: true
    includeHeaders: false
    includeQueryString: true
    includePayload: true
    maxPayloadLength: 10000

  logback:
    rollingpolicy:
      max-file-size: 1GB
      max-history: 30
